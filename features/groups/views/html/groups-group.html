<div class="groups-group">
  <rv-require name="pl-scrolls" src="/public/vendor/plumes/scrolls/pl-scrolls"></rv-require>

  <div class="pl-scrolls">

    <div class="header-bg" style="background-image: url('{{displayCover(group.coverLarge)}}');"></div>

    <header>
      <div class="row">
        <div class="six columns">
          <h1><a href="{{url}}">{{group.name}}</a></h1>
          <p>{{group.description}}</p>
        </div>
        <div class="six columns">
          {{#if leadersTotal || group.activeUserCanInvitLeaders}}
            <h3><a href="{{leadersUrl}}">{{_('Leaders')}}</a></h3>
          {{/if}}

          <div class="groups-group-members">
            <rv-require
              name="members-list"
              src="/public/members/members-list"

              data-type="groupleaders"
              data-template="thumbnail"
              data-bindparent-moreurl="leadersUrl"
              data-count="5"
              data-notransition="true"
              data-bindparent-groupid="group.id"
              data-bindchild-total="leadersTotal"
              data-on-click="memberClick"
            ></rv-require>

            <div class="clear"></div>
          </div>

          <div class="clear"></div>

          {{#if group.activeUserCanInvitLeaders}}
            <rv-require
              name="pl-autocomplete"
              src="/public/vendor/plumes/autocomplete/pl-autocomplete"
              class="groups-group-invit-autocomplete-container"

              data-is="leader"
              data-listposition="bottom"
              data-autoselection="false"
              data-placeholder="{{_('Invite new leaders...')}}"
              data-cls="groups-group-invit-autocomplete"
              data-selectioncls="groups-group-invit-autocomplete-selection"
              data-inputcls="groups-group-invit-autocomplete-input"
              data-listcls="groups-group-invit-autocomplete-list"
              data-bind-focus="invitFocus"
              data-bind-change="invitChange"
              data-bind-select="invitSelect"
            ></rv-require>

            <div class="clear"></div>
          {{/if}}

          {{#if membersTotal || group.activeUserCanInvitMembers}}
            <h3><a href="{{membersUrl}}">
              {{_(group.special == 'deactivated' ? 'Deactivated' : 'Members')}}
            </a></h3>
          {{/if}}

          <div class="groups-group-members">
            <rv-require
              name="members-list"
              src="/public/members/members-list"

              data-type="groupmembers"
              data-template="thumbnail"
              data-bindparent-moreurl="membersUrl"
              data-count="5"
              data-notransition="true"
              data-bindparent-groupid="group.id"
              data-bindchild-total="membersTotal"
              data-on-click="memberClick"
            ></rv-require>

            <div class="clear"></div>
          </div>

          <div class="clear"></div>

          {{#if group.activeUserCanInvitMembers}}
            <rv-require
              name="pl-autocomplete"
              src="/public/vendor/plumes/autocomplete/pl-autocomplete"
              class="groups-group-invit-autocomplete-container"

              data-is="member"

              data-listposition="bottom"
              data-autoselection="false"
              data-placeholder="{{_(group.special == 'deactivated' ? 'Deactivate members...' : 'Invite new members...')}}"
              data-cls="groups-group-invit-autocomplete"
              data-selectioncls="groups-group-invit-autocomplete-selection"
              data-inputcls="groups-group-invit-autocomplete-input"
              data-listcls="groups-group-invit-autocomplete-list"
              data-bind-focus="invitFocus"
              data-bind-change="invitChange"
              data-bind-select="invitSelect"
            ></rv-require>

            <div class="clear"></div>
          {{/if}}

          {{#if invitationsTotal}}
            <h3><a href="{{invitationsUrl}}">Invitations</a></h3>
          {{/if}}

          <div class="groups-group-members">
            <rv-require
              name="members-list"
              src="/public/members/members-list"

              data-type="groupinvitations"
              data-template="thumbnail"
              data-bindparent-moreurl="invitationsUrl"
              data-count="5"
              data-notransition="true"
              data-bindparent-groupid="group.id"
              data-bindchild-total="invitationsTotal"
              data-on-click="memberClick"
            ></rv-require>

            <div class="clear"></div>
          </div>

          <div class="clear"></div>
        </div>
      </div>
    </header>

    <section class="groups-group-body">
      {{#if page == 'leaders'}}
        <h2>{{_('Leaders')}} <span>{{groupLeadersTotal}}</span></h2>

        <input class="groups-group-filter" type="text" placeholder="{{_('Find a leader...')}}" value="{{pageFilter}}" />

        <rv-require
          name="members-list"
          src="/public/members/members-list"

          data-type="groupleaders"
          data-template="card"
          data-bindparent-filter="pageFilterValue"
          data-bindparent-count="pageItemsCount"
          data-nomore="true"
          data-showmore="true"
          data-notransition="true"
          data-bindparent-groupid="group.id"
          data-bindchild-total="groupLeadersTotal"
          data-bindparent-canbecomemember="canBecomeMember"
          data-bindparent-canremove="canRemoveMember"
          data-on-click="memberClick"
          data-on-clickshowmore="showMore"
          data-on-becomemember="becomemember"
          data-on-remove="remove"
        ></rv-require>

      {{elseif page == 'members' || page == 'deactivated'}}
        <h2>{{_(page == 'members' ? 'Members' : 'Deactivated')}} <span>{{groupMembersTotal}}</span></h2>

        <input class="groups-group-filter" type="text" placeholder="{{_('Find a member...')}}" value="{{pageFilter}}" />

        <rv-require
          name="members-list"
          src="/public/members/members-list"

          data-type="groupmembers"
          data-template="card"
          data-bindparent-filter="pageFilterValue"
          data-bindparent-count="pageItemsCount"
          data-nomore="true"
          data-showmore="true"
          data-notransition="true"
          data-bindparent-groupid="group.id"
          data-bindchild-total="groupMembersTotal"
          data-bindparent-canremove="canRemoveMember"
          data-bindparent-canreactivate="canReactivateDeactivated"
          data-on-click="memberClick"
          data-on-clickshowmore="showMore"
          data-on-remove="remove"
          data-on-reactivate="reactivate"
        ></rv-require>

      {{elseif page == 'invitations'}}
        <h2>{{_('Invitations')}} <span>{{groupInvitationsTotal}}</span></h2>

        <input class="groups-group-filter" type="text" placeholder="{{_('Find an invitation...')}}" value="{{pageFilter}}" />

        <rv-require
          name="members-list"
          src="/public/members/members-list"

          data-type="groupinvitations"
          data-template="card"
          data-bindparent-filter="pageFilterValue"
          data-bindparent-count="pageItemsCount"
          data-nomore="true"
          data-showmore="true"
          data-notransition="true"
          data-bindparent-groupid="group.id"
          data-bindchild-total="groupInvitationsTotal"
          data-bindparent-cancancelinvitation="canCancelInvitation"
          data-on-click="memberClick"
          data-on-clickshowmore="showMore"
          data-on-cancelinvitation="cancelinvitation"
        ></rv-require>

      {{elseif group.permissions.length}}
        <div class="row">
          <div class="four columns">
            <div class="groups-group-widget">
              {{_('Permissions')}}
              <ul>
                {{#group.permissions}}
                <li>{{.}}</li>
                {{/group.permissions}}
              </ul>
            </div>
          </div>
        </div>
      {{/if}}
    </section>

  </div>
</div>
